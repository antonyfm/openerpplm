<?xml version="1.0" encoding="utf-8"?>
<openerp> 
	<data> 
	
    <record model="ir.ui.view" id="plm_component_base_form_extended_weight">
        <field name="name">plm.base.component.extended.weight</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="plm.plm_component_base_form"/>
        <field name="type">form</field>
        <field name="arch" type="xml">
			<xpath expr="//field[@name='weight']" position="replace">
				<group name="weight" string="Weight" colspan="4" col="4">
					<field name="automatic_compute_selection" widget='radio'/> 
         			<field name="weight"		attrs="{'readonly':[('state', 'in', ['released', 'obsoleted'])]}" />
         			<field name="weight_additional"		attrs="{'readonly':['|', ('state', 'in', ['released', 'obsoleted']), 
         																		 ('automatic_compute_selection', 'not in', ['use_normal_bom', 'use_cad'])]}"/>
					<field name="weight_cad" />
					<field name="weight_nbom_computed" />
        		</group>
			</xpath>
        </field>
    </record>
	
        <record id="action_bom_weight_computed" model="ir.actions.server">
            <field name="name">Compute Bom Weight</field>
            <field name="condition">True</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_product_product"/>
            <field name="state">code</field>
            <field name="code">env['product.product'].browse(context['active_ids']).computeBomWeightAction()</field>
        </record>

        <record model="ir.values" id="action_bom_weight_computed_value">
            <field name="name">action_bom_weight_computed</field>
            <field name="action_id" ref="action_bom_weight_computed" />
            <field name="value" eval="'ir.actions.server,' + str(ref('action_bom_weight_computed'))" />
            <field name="key">action</field>
            <field name="model_id" ref="model_product_product" />
            <field name="model">product.product</field>
            <field name="key2">client_action_multi</field>
        </record>
        
	</data>
</openerp>